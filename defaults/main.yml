---

docker:

  repositories:

    # Section for docker-ce package, added after docker 17.06 released.
    # @see https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/
    # .list extension will be added automatically for the filename parameter.
    - key:
        id: 9DC858229FC7DD38854AE2D88D81803C0EBFCD88
        url: https://download.docker.com/linux/ubuntu/gpg
      repository: deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable
      filename: docker
      state: present

    # This repository is outdated since docker 17.06 is released
    # @see https://docs.docker.com/engine/installation/linux/ubuntulinux/
    # (documentation redirected to new one)
    - key:
        id: 58118E89F3A912897C070ADBF76221572C52609D
        keyserver: hkp://p80.pool.sks-keyservers.net:80
      repository: deb [arch=amd64] https://apt.dockerproject.org/repo ubuntu-{{ ansible_distribution_release }} main
      filename: docker
      state: absent

  packages:
    - package: docker-ce
      state: latest
    - package: lxc-docker
      state: absent
    - package: docker
      state: absent
    - package: docker-engine
      state: absent
    - package: docker.io
      state: absent

  pips:
    - package: docker
      state: latest
    - package: docker-py
      state: absent

  networks:
    - name: docknet
      driver: bridge
    - name: docknet-overlay
      driver: overlay
      attachable: True
      encrypted: True

  secrets: []
    # Use format:
    #
    #- name: some-secret
    #  data: some-data
    #  state: present
    #  labels:
    #    some: label
    #- name: some-secret-to-remove
    #  state: absent
    #
    # Note that this is your responsibility to be sure that Docker Swarm mode is enabled on node and secrets are defined
    # for only one node in Swarm cluster to avoid secrets creation on every cluster's node what is extremely redundant

  compose:
    path: /usr/local/bin
    version: 1.21.2
    sha256: 8a11713e11ed73abcb3feb88cd8b5674b3320ba33b22b2ba37915b4ecffdf042

  config:
    # When this configuration parameter contain version as string, for example the latest known stable version string:
    #     18.03.1~ce-0~ubuntu
    # it will pin your Docker engine to specified version (by creating special file /etc/apt/preferences.d/docker-ce)
    # By default this is disabled, as this Ansible role trying to install Docker engine close to it's official guide.
    pin_docker_engine_to_version: no

    # Use this settings to create /etc/docker/daemon.json crossplatform docker daemon config file.
    # Set only settings that you really need! Commented keys below given for quick reference.
    # @see https://docs.docker.com/engine/reference/commandline/dockerd/#/daemon-configuration-file
    json:
#      authorization-plugins: []
#      dns: []
#      dns-opts: []
#      dns-search: []
#      exec-opts: []
#      storage-driver: ""
#      storage-opts: []
#      labels: []
#      log-driver: ""
#      mtu: 0
#      pidfile: ""
#      graph: ""
#      cluster-store: ""
#      cluster-advertise: ""
#      debug: True
#      hosts: []
#      log-level: ""
#      tlsverify: True
#      tlscacert: ""
#      tlscert: ""
#      tlskey: ""
#      group: ""
#      default-ulimits: {}
#      bridge: ""
#      fixed-cidr: ""
#      raw-logs: False
#      registry-mirrors: []
#      insecure-registries: []
#      disable-legacy-registry: False


  containers: []
    # Examples:
    #
    #
    # To recreate redis container:
    #
    # - name: myredis
    #   image: redis
    #   command: redis-server --appendonly yes
    #   state: present
    #   recreate: yes
    #   exposed_ports:
    #     - 6379
    #   volumes_from:
    #     - mydata
    #
    #
    # Some Alpine-based container:
    #
    # Note that you cannot run any container based on alpine image, if you try:
    #     sudo docker create --name alpine alpine:3.3
    # you get:
    #     Error response from daemon: No command specified
    # Because it have no ENTRYPOINT no CMD.
    # So thats why we use "state: absent" here.
    #
    # - name: alpine
    #   image: alpine
    #   state: absent
    #   ports: []
    #
    #
    # Busybox-based container
    #
    # - name: busybox
    #   image: busybox
    #   state: started
    #   detach: False
    #   ports: []

  users: []
    # List of Linux usernames to be added to docker group
    # Example:
    #   - myuser
    #   - anotheruser
    #
    # Note that current version of user is lack of removing user from group functionality, so this can not be done here.
    # @see https://github.com/ansible/ansible/issues/11024
