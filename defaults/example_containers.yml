---

## Example containers configurations. Port mapping are synced with it's example vhosts configuration.
docker:
  containers:

    # DockerUI
    # @see https://hub.docker.com/r/kevan/dockerui/
    - name: dockerui
      enabled: no
      image: kevan/dockerui
      tag: 0.10.1
      state: started
      hostname: dockerui
      detach: True
      restart_policy: always
      ports:
        - "9000:9000"
      volumes:
        - /var/run/docker.sock:/var/run/docker.sock
      privileged: True

    # phpMemcacheAdmin
    # @see https://hub.docker.com/r/jacksoncage/phpmemcachedadmin/
    - name: phpmemcachedadmin
      enabled: no
      image: jacksoncage/phpmemcachedadmin
      state: started
      hostname: phpmemcachedadmin
      detach: True
      restart_policy: always
      ports:
        - "30080:80"
      volumes:
        - /data/phpmemcachedadmin/logs:/var/log/nginx
        - /data/phpmemcachedadmin/config:/phpmemcachedadmin

    # Gitlab Community Edition
    # @see https://hub.docker.com/r/gitlab/gitlab-ce/
    - name: gitlab
      enabled: no
      image: gitlab/gitlab-ce
      tag: 8.6.7-ce.0
      state: started
      hostname: gitlab.example.com
      detach: True
      restart_policy: always
      ports:
        - "31443:443"
        - "31080:80"
        - "22:22"
      volumes:
        - /data/gitlab/config:/etc/gitlab
        - /data/gitlab/logs:/var/log/gitlab
        - /data/gitlab/data:/var/opt/gitlab

    # Memcached
    # @see https://hub.docker.com/_/memcached/
    - name: memcached
      enabled: no
      image: memcached
      tag: 1.4.25
      state: started
      detach: True
      restart_policy: always

    # Private Docker Registry
    # @see https://docs.docker.com/registry/
    - name: registry
      enabled: yes
      image: registry
      tag: 2.3.1
      state: started
      hostname: dockerui
      detach: True
      restart_policy: always
      ports:
        - "5000:5000"
      env:
        REGISTRY_STORAGE_DELETE_ENABLED: True

    # Docker Registry Frontend
    # @see https://hub.docker.com/r/konradkleine/docker-registry-frontend/
    - name: docker-registry-frontend
      enabled: no
      image: konradkleine/docker-registry-frontend
      tag: v2
      state: started
      detach: True
      restart_policy: always
      ports:
        - "32080:80"
      env:
        ENV_DOCKER_REGISTRY_HOST: registry.example.com
        ENV_DOCKER_REGISTRY_PORT: 5000

    # Jenkins
    # @see https://hub.docker.com/_/jenkins/
    - name: jenkins
      enabled: no
      image: jenkins
      tag: 2.0-beta-2
      state: started
      detach: yes
      restart_policy: always
      ports:
        - "33080:8080"
        - "50000:50000"
      volumes:
        - /data/jenkins:/var/jenkins_home
      env:
        JAVA_OPTS: -Dhudson.footerURL=http://jenkins.example.com-Djava.awt.headless=true -Dhudson.security.csrf.requestfield=crumb

    # MySQL
    # @see https://hub.docker.com/_/mysql/
    - name: mysql
      enabled: no
      image: mysql
      tag: 5.7.12
      state: started
      detach: yes
      restart_policy: always
      ports:
        - "3306:3306"
      volumes:
        - /data/mysql:/var/lib/mysql
      env:
        MYSQL_ROOT_PASSWORD: secret_password
